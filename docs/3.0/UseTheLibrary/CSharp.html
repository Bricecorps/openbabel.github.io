
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CSharp and OBDotNet &#8212; Open Babel 3.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ruby" href="Ruby.html" />
    <link rel="prev" title="Perl" href="Perl.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Ruby.html" title="Ruby"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Perl.html" title="Perl"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Babel 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="intro.html" accesskey="U">Write software using the Open Babel library</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/babel130.png" alt="Logo"/>
            </a></p>
    <a href="http://www.jcheminf.com/content/3/1/33">J. Cheminf. <b>2011</b>, <i>3</i>, 33</a>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CSharp and OBDotNet</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#macosx-and-linux">MacOSX and Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obdotnet-api">OBDotNet API</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Perl.html"
                        title="previous chapter">Perl</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Ruby.html"
                        title="next chapter">Ruby</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="csharp-and-obdotnet">
<h1>CSharp and OBDotNet<a class="headerlink" href="#csharp-and-obdotnet" title="Permalink to this headline">¶</a></h1>
<p><strong>OBDotNet</strong> is a compiled assembly that allows Open Babel to be used from the various .NET  languages (e.g. Visual Basic, C#, IronPython, IronRuby, and J#) on Windows, Linux and MacOSX. The current version is OBDotNet 0.4.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>The <code class="file docutils literal notranslate"><span class="pre">OBDotNet.dll</span></code> assembly provided on Windows was compiled using the .NET framework v3.5 for the x86 platform. To use it, you will need to compile your code using .NET v3.5 or newer and you will also need to target x86 (<code class="docutils literal notranslate"><span class="pre">/platform:x86</span></code>).</p>
<p>The following instructions describe how to compile a simple C# program that uses OBDotNet:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">First you need to download and install the <strong class="program">OpenBabelGUI version 2.3.2</strong></p>
</li>
<li><p class="first">Next create an example CSharp program that uses the Open Babel API (see below for one or use <a class="reference external" href="http://openbabel.svn.sf.net/viewvc/openbabel/openbabel/tags/openbabel-2-2-1/scripts/csharp/example.cs?revision=2910">this link</a>). Let’s call this <code class="file docutils literal notranslate"><span class="pre">example.cs</span></code>.</p>
</li>
<li><p class="first">Copy <code class="file docutils literal notranslate"><span class="pre">OBDotNet.dll</span></code> from the Open Babel installation into the same folder as <code class="file docutils literal notranslate"><span class="pre">example.cs</span></code>.</p>
</li>
<li><p class="first">Open a command prompt at the location of <code class="file docutils literal notranslate"><span class="pre">example.cs</span></code> and compile it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">Work</span><span class="o">&gt;</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Windows</span>\<span class="n">Microsoft</span><span class="o">.</span><span class="n">NET</span>\<span class="n">Framework</span>\<span class="n">v3</span><span class="o">.</span><span class="mi">5</span>\<span class="n">csc</span><span class="o">.</span><span class="n">exe</span>
                           <span class="o">/</span><span class="n">reference</span><span class="p">:</span><span class="n">OBDotNet</span><span class="o">.</span><span class="n">dll</span> <span class="o">/</span><span class="n">platform</span><span class="p">:</span><span class="n">x86</span> <span class="n">example</span><span class="o">.</span><span class="n">cs</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the created executable, <strong class="program">example.exe</strong>, to discover the molecule weight of propane:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">Work</span><span class="o">&gt;</span> <span class="n">example</span><span class="o">.</span><span class="n">exe</span>
<span class="mf">44.09562</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<p>If you prefer to use the MSVC# GUI, note that the Express edition does not have the option to choose x86 as a target. This will be a problem if you are using a 64-bit operating system. There’s some information at <a class="reference external" href="http://coffeedrivendevelopment.blogspot.com/2008/06/hacking-vs-c-2008-express.html">Coffee Driven Development</a> on how to get around this.</p>
</div>
<div class="section" id="macosx-and-linux">
<h3>MacOSX and Linux<a class="headerlink" href="#macosx-and-linux" title="Permalink to this headline">¶</a></h3>
<p>On Linux and MacOSX you need to use Mono, the open source implementation of the .NET framework, to compile the bindings. The following instructions describe how to compile and use these bindings:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first"><code class="file docutils literal notranslate"><span class="pre">OBDotNet.dll</span></code> is included in the Open Babel source distribution in <code class="file docutils literal notranslate"><span class="pre">scripts/csharp</span></code>. To compile a CSharp application that uses this (e.g. the example program shown below), use a command similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gmcs</span> <span class="n">example</span><span class="o">.</span><span class="n">cs</span> <span class="o">/</span><span class="n">reference</span><span class="p">:</span><span class="o">../</span><span class="n">openbabel</span><span class="o">-</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">2</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">csharp</span><span class="o">/</span><span class="n">OBDotNet</span><span class="o">.</span><span class="n">dll</span>
</pre></div>
</div>
</li>
<li><p class="first">To run this on MacOSX or Linux you need to compile the CSharp bindings as described in the section <a class="reference internal" href="../Installation/install.html#compile-bindings"><span class="std std-ref">Compile language bindings</span></a>. This creates <code class="file docutils literal notranslate"><span class="pre">lib/libopenbabel_csharp.so</span></code> in the build directory.</p>
</li>
<li><p class="first">Add the location of <code class="file docutils literal notranslate"><span class="pre">OBDotNet.dll</span></code> to the environment variable MONO_PATH. Add the location of <code class="file docutils literal notranslate"><span class="pre">libopenbabel_csharp.so</span></code> to the environment variable LD_LIBRARY_PATH. Additionally, if you have not installed Open Babel globally you should set BABEL_LIBDIR to the location of the Open Babel library and BABEL_DATADIR to the <code class="file docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</li>
<li><p class="first">Run <code class="file docutils literal notranslate"><span class="pre">example.exe</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./example.exe
44.09562
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="obdotnet-api">
<h2>OBDotNet API<a class="headerlink" href="#obdotnet-api" title="Permalink to this headline">¶</a></h2>
<p>The API is almost identical to the Open Babel <a class="reference internal" href="CppAPI.html#api"><span class="std std-ref">C++ API</span></a>. Differences are described here.</p>
<p class="rubric">Using iterators</p>
<p>In OBDotNet, iterators are provided as methods of the relevant class. The full list is as follows:</p>
<ul class="simple">
<li><strong>OBMol</strong> has <code class="docutils literal notranslate"><span class="pre">.Atoms()</span></code>, <code class="docutils literal notranslate"><span class="pre">.Bonds()</span></code>, <code class="docutils literal notranslate"><span class="pre">.Residues()</span></code>, and <code class="docutils literal notranslate"><span class="pre">.Fragments()</span></code>. These correspond to <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBMolAtomIter.shtml">OBMolAtomIter</a>, <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBMolBondIter.shtml">OBMolBondIter</a>, <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBResidueIter.shtml">OBResidueIter</a> and <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBMolAtomDFSIter.shtml">OBMolAtomDFSIter</a> respectively.</li>
<li><strong>OBAtom</strong> has <code class="docutils literal notranslate"><span class="pre">.Bonds()</span></code> and <code class="docutils literal notranslate"><span class="pre">.Neighbours()</span></code>. These correspond to <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBAtomBondIter.shtml">OBAtomBondIter</a> and <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBAtomAtomIter.shtml">OBAtomAtomIter</a> respectively.</li>
</ul>
<p>Such iterators are used as follows:</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="n">OBAtom</span> <span class="n">atom</span> <span class="k">in</span> <span class="n">myobmol</span><span class="p">.</span><span class="n">Atoms</span><span class="p">())</span>
    <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">atom</span><span class="p">.</span><span class="n">GetAtomType</span><span class="p">());</span>
</pre></div>
</div>
<p>Other iterators in the C++ API not listed above can still be used through their IEnumerator methods.</p>
<p class="rubric">Handling OBGenericData</p>
<p>To cast <a class="reference external" href="http://openbabel.org/dev-api/classOpenBabel_1_1OBGenericData.shtml">OBGenericData</a> to a specific subclass, you should use the <code class="docutils literal notranslate"><span class="pre">.Downcast</span> <span class="pre">&lt;T&gt;</span></code> method, where <code class="docutils literal notranslate"><span class="pre">T</span></code> is a subclass of <strong>OBGenericData</strong>.</p>
<p class="rubric">Open Babel Constants</p>
<p>Open Babel constants are available in the class <code class="docutils literal notranslate"><span class="pre">openbabelcsharp</span></code>.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The following sections show how the same example application would be programmed in C#, Visual Basic and IronPython. The programs print out the molecular weight of propane (represented by the SMILES string “CCC”).</p>
<p class="rubric">C#</p>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">OpenBabel</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MyConsoleApplication</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">OBConversion</span> <span class="n">obconv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">OBConversion</span><span class="p">();</span>
            <span class="n">obconv</span><span class="p">.</span><span class="n">SetInFormat</span><span class="p">(</span><span class="s">&quot;smi&quot;</span><span class="p">);</span>
            <span class="n">OBMol</span> <span class="n">mol</span> <span class="p">=</span> <span class="k">new</span> <span class="n">OBMol</span><span class="p">();</span>
            <span class="n">obconv</span><span class="p">.</span><span class="n">ReadString</span><span class="p">(</span><span class="n">mol</span><span class="p">,</span> <span class="s">&quot;CCC&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">mol</span><span class="p">.</span><span class="n">GetMolWt</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="rubric">Visual Basic</p>
<div class="highlight-vb.net notranslate"><div class="highlight"><pre><span></span><span class="k">Imports</span> <span class="nn">OpenBabel</span>

<span class="k">Module</span> <span class="nn">Module1</span>

    <span class="k">Sub</span> <span class="nf">Main</span><span class="p">()</span>
        <span class="k">Dim</span> <span class="n">OBConv</span> <span class="ow">As</span> <span class="k">New</span> <span class="n">OBConversion</span><span class="p">()</span>
        <span class="k">Dim</span> <span class="n">Mol</span> <span class="ow">As</span> <span class="k">New</span> <span class="n">OBMol</span><span class="p">()</span>

        <span class="n">OBConv</span><span class="p">.</span><span class="n">SetInFormat</span><span class="p">(</span><span class="s">&quot;smi&quot;</span><span class="p">)</span>
        <span class="n">OBConv</span><span class="p">.</span><span class="n">ReadString</span><span class="p">(</span><span class="n">Mol</span><span class="p">,</span> <span class="s">&quot;CCC&quot;</span><span class="p">)</span>
        <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;The molecular weight of propane is &quot;</span> <span class="o">&amp;</span> <span class="n">Mol</span><span class="p">.</span><span class="n">GetMolWt</span><span class="p">())</span>
    <span class="k">End</span> <span class="k">Sub</span>

<span class="k">End</span> <span class="k">Module</span>
</pre></div>
</div>
<p class="rubric">IronPython</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">clr</span>
<span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s2">&quot;OBDotNet.dll&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">OpenBabel</span> <span class="kn">as</span> <span class="nn">ob</span>

<span class="n">conv</span> <span class="o">=</span> <span class="n">ob</span><span class="o">.</span><span class="n">OBConversion</span><span class="p">()</span>
<span class="n">conv</span><span class="o">.</span><span class="n">SetInFormat</span><span class="p">(</span><span class="s2">&quot;smi&quot;</span><span class="p">)</span>
<span class="n">mol</span> <span class="o">=</span> <span class="n">ob</span><span class="o">.</span><span class="n">OBMol</span><span class="p">()</span>
<span class="n">conv</span><span class="o">.</span><span class="n">ReadString</span><span class="p">(</span><span class="n">mol</span><span class="p">,</span> <span class="s2">&quot;CCC&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">mol</span><span class="o">.</span><span class="n">GetMolWt</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Ruby.html" title="Ruby"
             >next</a> |</li>
        <li class="right" >
          <a href="Perl.html" title="Perl"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Babel 3.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="intro.html" >Write software using the Open Babel library</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Open Babel community.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>